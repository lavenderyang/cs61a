<!DOCTYPE html>
<!-- saved from url=(0030)https://cs61a.org/hw/sol-hw05/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Chae Park, Kavi Gupta, Ryan Moughan">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 5 Solutions _ CS 61A Summer 2020_files/jquery.min.js.download"></script>
    <script src="./Homework 5 Solutions _ CS 61A Summer 2020_files/bootstrap.min.js.download"></script>
    <script src="./Homework 5 Solutions _ CS 61A Summer 2020_files/hl.js.download"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="./Homework 5 Solutions _ CS 61A Summer 2020_files/dark-mode.js.download"></script>
    <link rel="stylesheet" href="./Homework 5 Solutions _ CS 61A Summer 2020_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 5 Solutions _ CS 61A Summer 2020_files/css">
    <link rel="stylesheet" href="./Homework 5 Solutions _ CS 61A Summer 2020_files/style.css">
    <link rel="stylesheet" href="./Homework 5 Solutions _ CS 61A Summer 2020_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 5 Solutions _ CS 61A Summer 2020_files/hw.css">


    <title>
Homework 5 Solutions | CS 61A Summer 2020
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Homework 5 Solutions _ CS 61A Summer 2020_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/sol-hw05/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor.html">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs.html">TAs</a></li>
                <li><a href="https://cs61a.org/tutors.html">Tutors</a></li>
                <!-- <li><a href="/academic-interns.html">Academic Interns</a></li> -->
              </ul>
            </li>
            <li><a href="https://cs61a.org/resources.html">Resources</a></li>
            <li><a href="https://cs61a.org/articles/about.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/summer2020/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://denero.org/feedback.html" target="_blank">Feedback</a></li>
            <li><a href="https://edge.edx.org/courses/course-v1:BerkeleyX+CSW61A+2020_SP">EdX</a></li>
            <!-- <li><a href="https://scheme.cs61a.org">Scheme</a></li> -->
            <!-- <li><a href="https://sql.cs61a.org">SQL</a></li> -->
            <li><a href="https://code.cs61a.org/">Code</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Homework 5 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/sol-hw05/hw05.zip" class="label label-outline">hw05.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>
<p>You can find the solutions in <a href="https://cs61a.org/hw/sol-hw05/hw05.py">hw05.py</a>.</p>

    
<h1 id="required-questions">Required Questions</h1>



<h2 id="nonlocal">Nonlocal</h2>


<h3 class="question" id="q1">Q1: Make Bank</h3>

<p>In lecture, we saw how to use functions to create mutable objects.
Here, for example, is the function <code>make_withdraw</code> which produces a
function that can withdraw money from an account:</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_withdraw</span><span class="hljs-params">(balance)</span>:</span>
    <span class="hljs-string">"""Return a withdraw function with BALANCE as its starting balance.
    &gt;&gt;&gt; withdraw = make_withdraw(1000)
    &gt;&gt;&gt; withdraw(100)
    900
    &gt;&gt;&gt; withdraw(100)
    800
    &gt;&gt;&gt; withdraw(900)
    'Insufficient funds'
    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span><span class="hljs-params">(amount)</span>:</span>
        <span class="hljs-keyword">nonlocal</span> balance
        <span class="hljs-keyword">if</span> amount &gt; balance:
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Insufficient funds'</span>
        balance = balance - amount
        <span class="hljs-keyword">return</span> balance
    <span class="hljs-keyword">return</span> withdraw</code></pre>

<p>Write a new function <code>make_bank</code>, which should create a bank account
with value <code>balance</code> and should also return another function. This
new function should be able to withdraw and deposit money. The 
second function will take in two arguments: <code>message</code> and
<code>amount</code>. When the message passed in is <code>'deposit'</code>, the bank will
deposit <code>amount</code> into the account. When the message passed in is
<code>'withdraw'</code>, the bank will attempt to withdraw <code>amount</code> from the
account. If the account does not have enough money for a withdrawal,
the string <code>'Insufficient funds'</code> will be returned. If the <code>message</code> 
passed in is neither of the two commands, the function should return 
<code>'Invalid message'</code> Examples are shown in the doctests.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_bank</span><span class="hljs-params">(balance)</span>:</span>
    <span class="hljs-string">"""Returns a bank function with a starting balance. Supports
    withdrawals and deposits.

    &gt;&gt;&gt; bank = make_bank(100)
    &gt;&gt;&gt; bank('withdraw', 40)    # 100 - 40
    60
    &gt;&gt;&gt; bank('hello', 500)      # Invalid message passed in
    'Invalid message'
    &gt;&gt;&gt; bank('deposit', 20)     # 60 + 20
    80
    &gt;&gt;&gt; bank('withdraw', 90)    # 80 - 90; not enough money
    'Insufficient funds'
    &gt;&gt;&gt; bank('deposit', 100)    # 80 + 100
    180
    &gt;&gt;&gt; bank('goodbye', 0)      # Invalid message passed in
    'Invalid message'
    &gt;&gt;&gt; bank('withdraw', 60)    # 180 - 60
    120
    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bank</span><span class="hljs-params">(message, amount)</span>:</span>
<div class="sol-highlight">        <span class="hljs-keyword">nonlocal</span> balance
        <span class="hljs-keyword">if</span> message == <span class="hljs-string">'deposit'</span>:
            amount = -amount
        <span class="hljs-keyword">elif</span> message == <span class="hljs-string">'withdraw'</span>:
            <span class="hljs-keyword">if</span> amount &gt; balance:
                <span class="hljs-keyword">return</span> <span class="hljs-string">'Insufficient funds'</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Invalid message'</span>
        balance = balance - amount
        <span class="hljs-keyword">return</span> balance</div>    <span class="hljs-keyword">return</span> bank</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_bank</code></pre>

<h3 class="question" id="q2">Q2: Password Protected Account</h3>

<p>Write a version of the <code>make_withdraw</code> function shown in the previous question
that returns password-protected withdraw functions. That is, <code>make_withdraw</code> should
take a password argument (a string) in addition to an initial balance.
The returned function should take two arguments: an amount to withdraw
and a password.</p>

<p>A password-protected <code>withdraw</code> function should only process
withdrawals that include a password that matches the original.  Upon
receiving an incorrect password, the function should:</p>

<ol>
  <li>Store that incorrect password in a list, and</li>
  <li>Return the string 'Incorrect password'.</li>
</ol>

<p>If a withdraw function has been called three times with incorrect
passwords <code>&lt;p1&gt;</code>, <code>&lt;p2&gt;</code>, and <code>&lt;p3&gt;</code>, then it is frozen.  All subsequent
calls to the function should return:</p>

<pre><code class="hljs python"><span class="hljs-string">"Too many incorrect attempts. Attempts: [&lt;p1&gt;, &lt;p2&gt;, &lt;p3&gt;]"</span></code></pre>

<p>The incorrect passwords may be the same or different:</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_withdraw</span><span class="hljs-params">(balance, password)</span>:</span>
    <span class="hljs-string">"""Return a password-protected withdraw function.

    &gt;&gt;&gt; w = make_withdraw(100, 'hax0r')
    &gt;&gt;&gt; w(25, 'hax0r')
    75
    &gt;&gt;&gt; error = w(90, 'hax0r')
    &gt;&gt;&gt; error
    'Insufficient funds'
    &gt;&gt;&gt; error = w(25, 'hwat')
    &gt;&gt;&gt; error
    'Incorrect password'
    &gt;&gt;&gt; new_bal = w(25, 'hax0r')
    &gt;&gt;&gt; new_bal
    50
    &gt;&gt;&gt; w(75, 'a')
    'Incorrect password'
    &gt;&gt;&gt; w(10, 'hax0r')
    40
    &gt;&gt;&gt; w(20, 'n00b')
    'Incorrect password'
    &gt;&gt;&gt; w(10, 'hax0r')
    "Too many incorrect attempts. Attempts: ['hwat', 'a', 'n00b']"
    &gt;&gt;&gt; w(10, 'l33t')
    "Too many incorrect attempts. Attempts: ['hwat', 'a', 'n00b']"
    &gt;&gt;&gt; type(w(10, 'l33t')) == str
    True
    """</span>
<div class="sol-highlight">    attempts = []
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span><span class="hljs-params">(amount, password_attempt)</span>:</span>
        <span class="hljs-keyword">nonlocal</span> balance
        <span class="hljs-keyword">if</span> len(attempts) == <span class="hljs-number">3</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Too many incorrect attempts. Attempts: '</span> + str(attempts)
        <span class="hljs-keyword">if</span> password_attempt != password:
            attempts.append(password_attempt)
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Incorrect password'</span>
        <span class="hljs-keyword">if</span> amount &gt; balance:
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Insufficient funds'</span>
        balance = balance - amount
        <span class="hljs-keyword">return</span> balance
    <span class="hljs-keyword">return</span> withdraw</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_withdraw</code></pre>

<div class="sol-highlight">

<p>A couple of things to note:</p>

<ul>
  <li>The <code>attempts</code> list does not need to be nonlocal. We're just mutating
  the list here, not reassigning it.</li>
  <li>The last few lines of our <code>withdraw</code> function are the same as the
  <code>withdraw</code> from lecture. There isn't much to add on top of that -- just
  the list operations and the password checks.</li>
</ul>

<p>Video walkthrough: <a href="https://youtu.be/YyjQoug0Mtg"> https://youtu.be/YyjQoug0Mtg </a></p>

</div>


<h2 id="iterators-and-generators">Iterators and Generators</h2>


<h3 class="question" id="q3">Q3: Repeated</h3>

<p>Implement a function (not a generator function) that returns the first value in
the iterator <code>t</code> that appears <code>k</code> times in a row. As described in lecture, iterators
can provide values using either the <code>next(t)</code> function or with a for-loop. Do not worry
about cases where the function reaches the end of the iterator without finding a suitable
value, all lists passed in for the tests will have a value that should be returned. If you
are receiving an error where the iterator has completed then the program is not identifying
the correct value. Iterate through the items such that if the same iterator is passed into
<code>repeated</code> twice, it continues in the second call at the point it left off in the first. An
example of this behavior is shown in the doctests.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">repeated</span><span class="hljs-params">(t, k)</span>:</span>
    <span class="hljs-string">"""Return the first value in iterator T that appears K times in a row. Iterate through the items such that
    if the same iterator is passed into repeated twice, it continues in the second call at the point it left off
    in the first.

    &gt;&gt;&gt; lst = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    &gt;&gt;&gt; repeated(lst, 2)
    9
    &gt;&gt;&gt; lst2 = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7])
    &gt;&gt;&gt; repeated(lst2, 3)
    8
    &gt;&gt;&gt; s = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5])
    &gt;&gt;&gt; repeated(s, 3)
    2
    &gt;&gt;&gt; repeated(s, 3)
    5
    &gt;&gt;&gt; s2 = iter([4, 1, 6, 6, 7, 7, 8, 8, 2, 2, 2, 5])
    &gt;&gt;&gt; repeated(s2, 3)
    2
    """</span>
    <span class="hljs-keyword">assert</span> k &gt; <span class="hljs-number">1</span>
<div class="sol-highlight">    count = <span class="hljs-number">1</span>
    last_item = <span class="hljs-literal">None</span>

    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        item = next(t)
        <span class="hljs-keyword">if</span> item == last_item:
            count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>:
            last_item = item
            count = <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> count == k:
            <span class="hljs-keyword">return</span> item
</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q repeated</code></pre>

<h3 class="question" id="q4">Q4: Merge</h3>

<p>Implement <code>merge(incr_a, incr_b)</code>, which takes two iterables <code>incr_a</code> and <code>incr_b</code> whose
elements are ordered. <code>merge</code> yields elements from <code>incr_a</code> and <code>incr_b</code> in sorted
order, eliminating repetition.  You may assume <code>incr_a</code> and <code>incr_b</code> themselves do not
contain repeats, and that none of the elements of either are <code>None</code>.
You may <strong>not</strong> assume that the iterables are finite; either may produce an infinite
stream of results.</p>

<p>You will probably find it helpful to use the two-argument version of the built-in
<code>next</code> function: <code>next(incr, v)</code> is the same as <code>next(incr)</code>, except that instead of
raising <code>StopIteration</code> when <code>incr</code> runs out of elements, it returns <code>v</code>.</p>

<p>See the doctest for examples of behavior.</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">merge</span><span class="hljs-params">(incr_a, incr_b)</span>:</span>
    <span class="hljs-string">"""Yield the elements of strictly increasing iterables incr_a and incr_b, removing
    repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may be infinite
    sequences.

    &gt;&gt;&gt; m = merge([0, 2, 4, 6, 8, 10, 12, 14], [0, 3, 6, 9, 12, 15])
    &gt;&gt;&gt; type(m)
    &lt;class 'generator'&gt;
    &gt;&gt;&gt; list(m)
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    &gt;&gt;&gt; def big(n):
    ...    k = 0
    ...    while True: yield k; k += n
    &gt;&gt;&gt; m = merge(big(2), big(3))
    &gt;&gt;&gt; [next(m) for _ in range(11)]
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    """</span>
    iter_a, iter_b = iter(incr_a), iter(incr_b)
    next_a, next_b = next(iter_a, <span class="hljs-literal">None</span>), next(iter_b, <span class="hljs-literal">None</span>)
<div class="sol-highlight">    <span class="hljs-keyword">while</span> next_a <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> next_b <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        <span class="hljs-keyword">if</span> next_a <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> next_b <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> next_b &lt; next_a:
            <span class="hljs-keyword">yield</span> next_b
            next_b = next(iter_b, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">elif</span> next_b <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> next_a <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> next_a &lt; next_b:
            <span class="hljs-keyword">yield</span> next_a
            next_a = next(iter_a, <span class="hljs-literal">None</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">yield</span> next_a
            next_a, next_b = next(iter_a, <span class="hljs-literal">None</span>), next(iter_b, <span class="hljs-literal">None</span>)</div></code></pre>

</solution>

<br>

<p>Watch the hints video below for somewhere to start:

            <iframe width="560" height="315" src="./Homework 5 Solutions _ CS 61A Summer 2020_files/wBwcnB5CNZg.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p>

<br>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q merge</code></pre>


<h2 id="submit">Submit</h2>


<p>Make sure to submit this assignment by running:</p>

<pre><code class="hljs sql">python3 ok <span class="hljs-comment">--submit</span></code></pre>


<h1 id="extra-questions">Extra Questions</h1>


<h3 class="question" id="q5">Q5: Joint Account</h3>

<p>Suppose that our banking system requires the ability to make joint
accounts.  Define a function <code>make_joint</code> that takes three arguments.</p>

<ol>
  <li>A password-protected <code>withdraw</code> function,</li>
  <li>The password with which that <code>withdraw</code> function was defined, and</li>
  <li>A new password that can also access the original account.</li>
</ol>

<p>If the password is incorrect or cannot be verified because the underlying
account is locked, the <code>make_joint</code> should propagate the error.
Otherwise, it returns a <code>withdraw</code> function that provides
additional access to the original account using <em>either</em> the new or old
password. Both functions draw from the same balance. Incorrect
passwords provided to either function will be stored and cause the
functions to be locked after three wrong attempts.</p>

<p><em>Hint</em>: The solution is short (less than 10 lines) and contains no string
literals!  The key is to call <code>withdraw</code> with the right password and amount,
then interpret the result.  You may assume that all failed attempts to withdraw
will return some string (for incorrect passwords, locked accounts, or
insufficient funds), while successful withdrawals will return a number.</p>

<p>Use <code>type(value) == str</code> to test if some <code>value</code> is a string:</p>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_joint</span><span class="hljs-params">(withdraw, old_pass, new_pass)</span>:</span>
    <span class="hljs-string">"""Return a password-protected withdraw function that has joint access to
    the balance of withdraw.

    &gt;&gt;&gt; w = make_withdraw(100, 'hax0r')
    &gt;&gt;&gt; w(25, 'hax0r')
    75
    &gt;&gt;&gt; make_joint(w, 'my', 'secret')
    'Incorrect password'
    &gt;&gt;&gt; j = make_joint(w, 'hax0r', 'secret')
    &gt;&gt;&gt; w(25, 'secret')
    'Incorrect password'
    &gt;&gt;&gt; j(25, 'secret')
    50
    &gt;&gt;&gt; j(25, 'hax0r')
    25
    &gt;&gt;&gt; j(100, 'secret')
    'Insufficient funds'

    &gt;&gt;&gt; j2 = make_joint(j, 'secret', 'code')
    &gt;&gt;&gt; j2(5, 'code')
    20
    &gt;&gt;&gt; j2(5, 'secret')
    15
    &gt;&gt;&gt; j2(5, 'hax0r')
    10

    &gt;&gt;&gt; j2(25, 'password')
    'Incorrect password'
    &gt;&gt;&gt; j2(5, 'secret')
    "Too many incorrect attempts. Attempts: ['my', 'secret', 'password']"
    &gt;&gt;&gt; j(5, 'secret')
    "Too many incorrect attempts. Attempts: ['my', 'secret', 'password']"
    &gt;&gt;&gt; w(5, 'hax0r')
    "Too many incorrect attempts. Attempts: ['my', 'secret', 'password']"
    &gt;&gt;&gt; make_joint(w, 'hax0r', 'hello')
    "Too many incorrect attempts. Attempts: ['my', 'secret', 'password']"
    """</span>
<div class="sol-highlight">    error = withdraw(<span class="hljs-number">0</span>, old_pass)
    <span class="hljs-keyword">if</span> type(error) == str:
        <span class="hljs-keyword">return</span> error
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">joint</span><span class="hljs-params">(amount, password_attempt)</span>:</span>
        <span class="hljs-keyword">if</span> password_attempt == new_pass:
            <span class="hljs-keyword">return</span> withdraw(amount, old_pass)
        <span class="hljs-keyword">return</span> withdraw(amount, password_attempt)
    <span class="hljs-keyword">return</span> joint</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_joint</code></pre>

<div class="sol-highlight">
The hint should alert you to the fact that returned strings should
indicate an error, which is useful for the initial setup phase.

<p>To make sure that we correctly created the joint account, we attempt to
withdraw <code>0</code> from it using the supplied password. If this failed, we
should exit immediately without creating the account, following the
guidance in the doctests.</p>

<p>Otherwise, we have successfully created the joint account! We now know the
old password is valid, but remember that the original password-protected
account does not know about any new passwords that a joint account might
accept. Therefore, when we see something matching the new password, we
still have to access the account using the old password.</p>

<p>Video walkthrough: <a href="https://youtu.be/h5MvIM1k1II"> https://youtu.be/h5MvIM1k1II </a></p>

</div>

<h3 class="question" id="q6">Q6: Remainder Generator</h3>
Like functions, generators can also be <em>higher-order</em>. For this problem, we
will be writing <code>remainders_generator</code>, which yields a series of generator
objects.

<p><code>remainders_generator</code> takes in an integer <code>m</code>, and yields <code>m</code> different
generators. The first generator is a generator of multiples of <code>m</code>, i.e.
numbers where the remainder is 0. The second is a generator of natural numbers
with remainder 1 when divided by <code>m</code>. The last generator yields natural numbers
with remainder <code>m - 1</code> when divided by <code>m</code>.</p>

<blockquote><p><em>Hint</em>: You can call the <code>naturals</code> function to create a generator of
infinite natural numbers.</p></blockquote>

<!--- --->

<blockquote><p><em>Hint</em>: Consider defining an inner generator function. Each yielded generator
varies only in that the elements of each generator have a particular
remainder when divided by <code>m</code>. What does that tell you about the argument(s)
that the inner function should take in?</p></blockquote>


            <iframe width="560" height="315" src="./Homework 5 Solutions _ CS 61A Summer 2020_files/I4jEb1o73Ek.html" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<solution>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remainders_generator</span><span class="hljs-params">(m)</span>:</span>
    <span class="hljs-string">"""
    Yields m generators. The ith yielded generator yields natural numbers whose
    remainder is i when divided by m.

    &gt;&gt;&gt; import types
    &gt;&gt;&gt; [isinstance(gen, types.GeneratorType) for gen in remainders_generator(5)]
    [True, True, True, True, True]
    &gt;&gt;&gt; remainders_four = remainders_generator(4)
    &gt;&gt;&gt; for i in range(4):
    ...     print("First 3 natural numbers with remainder {0} when divided by 4:".format(i))
    ...     gen = next(remainders_four)
    ...     for _ in range(3):
    ...         print(next(gen))
    First 3 natural numbers with remainder 0 when divided by 4:
    4
    8
    12
    First 3 natural numbers with remainder 1 when divided by 4:
    1
    5
    9
    First 3 natural numbers with remainder 2 when divided by 4:
    2
    6
    10
    First 3 natural numbers with remainder 3 when divided by 4:
    3
    7
    11
    """</span>
<div class="sol-highlight">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gen</span><span class="hljs-params">(i)</span>:</span>
        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> naturals():
            <span class="hljs-keyword">if</span> e % m == i:
                <span class="hljs-keyword">yield</span> e
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(m):
        <span class="hljs-keyword">yield</span> gen(i)</div></code></pre>

</solution>

<p>Note that if you have implemented this correctly, each of the
generators yielded by <code>remainder_generator</code> will be <em>infinite</em> - you
can keep calling <code>next</code> on them forever without running into a
<code>StopIteration</code> exception.</p>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q remainders_generator</code></pre>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/sol-hw05/#instructions">Instructions</a></li>
  <li><a href="https://cs61a.org/hw/sol-hw05/#required-questions">Required Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw05/#nonlocal">Nonlocal</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/hw/sol-hw05/#q1">Q1: Make Bank</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw05/#q2">Q2: Password Protected Account</a></li>
    </ul>
    <li><a href="https://cs61a.org/hw/sol-hw05/#iterators-and-generators">Iterators and Generators</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/hw/sol-hw05/#q3">Q3: Repeated</a></li>
      <li><a href="https://cs61a.org/hw/sol-hw05/#q4">Q4: Merge</a></li>
    </ul>
    <li><a href="https://cs61a.org/hw/sol-hw05/#submit">Submit</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/sol-hw05/#extra-questions">Extra Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/sol-hw05/#q5">Q5: Joint Account</a></li>
    <li><a href="https://cs61a.org/hw/sol-hw05/#q6">Q6: Remainder Generator</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about.html#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    console.log(target);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      // window.scrollTo(0, 0);
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  
</body></html>